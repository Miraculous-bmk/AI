{% extends 'store/index.html' %}
{% block content %}
<div class="row">
    <div class="card col-md-6">
        <img src="https://via.placeholder.com/300" class="img-fluid" alt="{{ product.name }}">
    </div>
    <div class="card-body col-md-6">
        <h3 class="card-title">{{ product.name }}</h5>
        <p class="card-text">{{ product.description }}</p>
        <p class="card-text"><strong>${{ product.price }}</strong></p>
        <a href="{% url 'add_to_cart' product.id %}" class="btn btn-primary">Add to Cart</a>
        <form action="{% url 'checkout_session' product.id %}" method="POST">
            {% csrf_token %}
            <script src="https://checkout.stripe.com/checkout.js" class="stripe-button"
                data-key="{{ stripe_publishable_key }}"
                data-amount="{{ product.price|floatformat:2|mul:100|int }}"
                data-name="{{ product.name }}"
                data-description="{{ product.description }}"
                data-image="https://via.placeholder.com/150"
                data-locale="auto">
            </script>
            <button type="submit" class="btn btn-success">Buy Now</button>
        </form>
    </div>
</div>
<hr>
<h3>Reviews</h3>
{% for review in product.reviews.all %}
    <div class="review">
        <strong>{{ review.user.username }}</strong> - {{ review.rating }} stars
        <p>{{ review.review_text }}</p>
        <p><small>{{ review.created_at }}</small></p>
    </div>
{% endfor %}
<hr>
{% if user.is_authenticated %}
    <h3>Leave a review</h3>
    <form action="{% url 'add_review' product.id %}" method="POST">
        {% csrf_token %}
        <div class="form-group">
            <label for="rating">Rating</label>
            <select class="form-control" id="rating" name="rating">
                {% for i in 1|to_int:5 %}
                    <option value="{{ i }}">{{ i }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="review_text">Review</label>
            <textarea class="form-control" id="review_text" name="review_text" rows="3"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Submit</button>
    </form>
{% else %}
    <p><a href="{% url 'login' %}">Log in</a> to leave a review.</p>
{% endif %}
{% endblock %}
<!-- Product Listing Page -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexora - Product Listing</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <!-- Header content here -->
    </header>
    <main>
        <div class="container">
            <h2 class="page-title">Shop Now</h2>
            <div class="product-list">
                <div class="product-card">
                    <img src="product1.jpg" alt="Product 1">
                    <h3 class="product-title">Product 1</h3>
                    <p class="product-price">$99.99</p>
                    <a href="#" class="btn btn-primary">View Details</a>
                </div>
                <!-- Repeat product cards as needed -->
            </div>
        </div>
    </main>
    <footer>
        <!-- Footer content here -->
    </footer>
    <script src="scripts.js"></script>
</body>
</html>
<!-- Product Details Page -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nexora - Product Details</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="header">
        <!-- Header content here -->
    </header>
    <main>
        <div class="container">
            <div class="product-details">
                <img src="product1.jpg" alt="Product 1">
                <div class="product-info">
                    <h2 class="product-title">Product 1</h2>
                    <p class="product-price">$99.99</p>
                    <p class="product-description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla convallis libero ac metus cursus, in lobortis nisi hendrerit.</p>
                    <div class="product-actions">
                        <button class="btn btn-primary">Add to Cart</button>
                        <button class="btn btn-secondary">Buy Now</button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <!-- Footer content here -->
    </footer>
    <script src="scripts.js"></script>
</body>
</html>
